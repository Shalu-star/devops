$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Flow.schema.json
environment:
  python_requirements_txt: requirements.txt
inputs:
  entity_type:
    type: string
    default: job title
  text:
    type: string
    default: The software engineer is working on a new update for the application.
outputs:
  entities:
    type: string
    reference: ${cleansing.output}
nodes:
  - name: NER_LLM
    type: llm
    source:
      type: code
      path: NER_LLM.jinja2
    inputs:
      deployment_name: gpt35
      text: ${inputs.text}
      entity_type: ${inputs.entity_type}
    connection: democonn
    api: chat
  - name: cleansing
    type: python
    source:
      type: code
      path: cleansing.py
    inputs:
      entities_str: ${NER_LLM.output}
